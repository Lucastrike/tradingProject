<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>prueba1</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <body>

    <div id="chart_div" style="width: 900px; height: 500px;"></div>

    <!-- <p width="100%" align="center">
<iframe width="500" height="390" scrolling="no" frameborder="0" style="border:none;" src="http://widgets.freestockcharts.com/WidgetServer/InteractiveChartWidget.aspx?guid=undefined&w=500&h=390"></iframe>
</p> -->

    <script type="text/javascript" src="jquery-3.1.1.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){

        var openBid;
        var lowBid;
        var highBid;
        var closeBid;

        $.ajax({
          type: 'GET',
          // beforeSend: function(request) {
          //   request.setRequestHeader("Authorization", "Bearer 2c7d369cd43f6880268a2dcde5b4edf9-38812a173828c88f87f833a8868826eb");
          // },
          //url: 'https://api-fxtrade.oanda.com/v1/candles?instrument=EUR_USD&count=2&dailyAlignment=0&alignmentTimezone=Europe%2FMadrid"',
          url: 'http://lucassalinas.com.es/tradingProject/data/current.json',
          dataType: 'json',
          success: function(data){
            console.log(data);
            for (var i=0; i<data.candles.length; i++) {
              openBid = data.candles[i].openBid;
              lowBid = data.candles[i].lowBid;
              highBid = data.candles[i].highBid;
              closeBid = data.candles[i].closeBid;
              console.log(openBid);
              console.log(lowBid);
              console.log(highBid);
              console.log(closeBid);
              console.log("==================");
            }
          },
          completed: function(){
            console.log("completed");
          },
          error: function(jqXHR, textStatus, errorThrown){
            if (jqXHR.status === 0) {

          alert('Not connect: Verify Network.');

        } else if (jqXHR.status == 404) {

          alert('Requested page not found [404]');

        } else if (jqXHR.status == 500) {

          alert('Internal Server Error [500].');

        } else if (textStatus === 'parsererror') {

          alert('Requested JSON parse failed.');

        } else if (textStatus === 'timeout') {

          alert('Time out error.');

        } else if (textStatus === 'abort') {

          alert('Ajax request aborted.');

        } else {

          alert('Uncaught Error: ' + jqXHR.responseText);

        }
          }
        });

        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
          //console.log(lowBid);
          var data = google.visualization.arrayToDataTable([
            ['Mon', lowBid, openBid, closeBid, highBid],
            ['Tue', lowBid, openBid, closeBid, highBid],
            ['Wed', lowBid, openBid, closeBid, highBid],
            ['Thu', lowBid, openBid, closeBid, highBid],
            ['Fri', lowBid, openBid, closeBid, highBid]
            // Treat first row as data as well.
          ], true);

          var options = {
            legend:'none'
          };

          var chart = new google.visualization.CandlestickChart(document.getElementById('chart_div'));

          chart.draw(data, options);
        }

      });
    </script>
    <!-- <script src="http://widgets.freestockcharts.com/js/jquery-1.3.1.min.js" type="text/javascript"></script> -->
    <!-- <script src="http://widgets.freestockcharts.com/script/WBIHorizontalTicker2.js?ver=12334" type="text/javascript"></script>
    <link href="http://widgets.freestockcharts.com/WidgetServer/WBITickerblue.css" rel="stylesheet" type="text/css" />
    <script>
      var gainerTick = new WBIHorizontalTicker('gainers');
      gainerTick.start();
      var loserTick = new WBIHorizontalTicker('losers');
      loserTick.start();
    </script> -->
  </body>
</html>
